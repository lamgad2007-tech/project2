<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø«Ø§Ù†ÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; margin: 0; padding: 0; background-color: #1a1a1a; color: #f0f0f0; }
        header { background: linear-gradient(135deg, #8E2DE2 0%, #4A00E0 100%); color: #fff; padding: 0.5rem 0; text-align: center; position: relative; min-height: 60px; }
        .container { width: 90%; max-width: 1200px; margin: auto; padding: 2rem 0; }
        .back-btn { position: absolute; top: 15px; right: 30px; color: #fff; text-decoration: none; font-weight: bold; background: rgba(0,0,0,0.2); padding: 5px 15px; border-radius: 20px; }
        .back-btn:hover { background: rgba(0,0,0,0.4); }
        
        .content-box {
            background: #2d2d2d;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            margin-top: 2rem;
            border: 1px solid #444;
        }
        
        h1, h2 { color: #fff; }
        p { line-height: 1.8; color: #ccc; }
        
        .btn { display: inline-block; background: #8E2DE2; color: #fff; padding: 0.8rem 2rem; text-decoration: none; border-radius: 50px; margin-top: 2rem; font-weight: bold; transition: background 0.3s; }
        .btn:hover { background: #6d1b9e; }

        footer { text-align: center; padding: 2rem; margin-top: 4rem; color: #777; border-top: 1px solid #333; }

        @keyframes tracking-in-expand {
            0% { letter-spacing: -0.5em; opacity: 0; }
            40% { opacity: 0.6; }
            100% { opacity: 1; }
        }

        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ù„Ø¹Ø¨Ø© X O */
        .xo-board { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; max-width: 300px; margin: 20px auto; }
        .cell { background: #444; height: 90px; display: flex; align-items: center; justify-content: center; font-size: 3rem; cursor: pointer; border-radius: 10px; font-weight: bold; transition: background 0.3s; }
        .cell:hover { background: #505050; }
        .cell.x { color: #ff4757; }
        .cell.o { color: #2ed573; }
        .controls { margin-bottom: 20px; }
        select { padding: 8px 15px; border-radius: 20px; border: 1px solid #555; background: #333; color: #fff; font-family: 'Cairo', sans-serif; margin: 0 5px; cursor: pointer; outline: none; }
        
        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„Ø£Ù„Ø¹Ø§Ø¨ */
        .hidden { display: none !important; }
        .games-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-top: 20px; }
        .game-card { background: #2d2d2d; padding: 30px 20px; border-radius: 15px; text-align: center; cursor: pointer; transition: transform 0.3s, background 0.3s; border: 1px solid #444; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .game-card:hover { transform: translateY(-10px); background: #353535; border-color: #8E2DE2; }
        .game-icon { font-size: 4rem; margin-bottom: 15px; display: block; }
        .back-to-menu { background: #555; color: #fff; border: none; padding: 8px 20px; border-radius: 20px; cursor: pointer; margin-bottom: 20px; display: inline-block; }
        .back-to-menu:hover { background: #777; }
        .guess-input { padding: 10px; font-size: 1.2rem; width: 150px; text-align: center; border-radius: 10px; border: none; margin: 10px; outline: none; }
        
        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ù„Ø¹Ø¨Ø© Ø§Ù„Ø°Ø§ÙƒØ±Ø© */
        .memory-board { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; max-width: 400px; margin: 20px auto; perspective: 1000px; }
        .memory-card { width: 100%; height: 90px; position: relative; transform-style: preserve-3d; transition: transform 0.6s; cursor: pointer; }
        .memory-card.is-flipped { transform: rotateY(180deg); }
        .card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; border-radius: 10px; }
        .card-front { background: #555; }
        .card-back { background: #8E2DE2; transform: rotateY(180deg); font-size: 2.5rem; }
        .memory-card.is-matched { transform: rotateY(180deg); opacity: 0.5; cursor: default; }
        
        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ù„Ø¹Ø¨Ø© Ø­Ø¬Ø± ÙˆØ±Ù‚Ø© Ù…Ù‚Øµ */
        .rps-choices { display: flex; justify-content: center; gap: 20px; margin: 30px 0; }
        .rps-btn { font-size: 3rem; background: #444; border: 2px solid #555; border-radius: 50%; width: 100px; height: 100px; cursor: pointer; transition: transform 0.2s, background 0.3s; display: flex; align-items: center; justify-content: center; }
        .rps-btn:hover { transform: scale(1.1); background: #555; border-color: #8E2DE2; }
    </style>
</head>
<body>

    <header>
        <h1 style="position: absolute; top: 5px; left: 30px; font-size: 3rem; margin: 0; animation: tracking-in-expand 1.5s cubic-bezier(0.215, 0.610, 0.355, 1.000) both;">GAME</h1>
    </header>

    <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„Ø£Ù„Ø¹Ø§Ø¨ -->
    <div class="container" id="main-menu">
        <div class="content-box" style="text-align: center;">
            <h2> Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</h2>
            <p>Ø§Ø®ØªØ± Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ù‡Ø§</p>
            
            <div class="games-grid">
                <div class="game-card" onclick="showGame('xo')">
                    <span class="game-icon">âŒâ­•</span>
                    <h3>ØªÙŠÙƒ ØªØ§Ùƒ ØªÙˆ</h3>
                    <p>ØªØ­Ø¯Ù‰ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ø£Ùˆ ØµØ¯ÙŠÙ‚Ùƒ</p>
                </div>
                <div class="game-card" onclick="showGame('reaction')">
                    <span class="game-icon">âš¡</span>
                    <h3>Ø³Ø±Ø¹Ø© Ø±Ø¯ Ø§Ù„ÙØ¹Ù„</h3>
                    <p>Ø§Ø®ØªØ¨Ø± Ø³Ø±Ø¹ØªÙƒ ÙÙŠ Ø§Ù„Ø¶ØºØ·</p>
                </div>
                <div class="game-card" onclick="showGame('guess')">
                    <span class="game-icon">ğŸ”¢</span>
                    <h3>ØªØ®Ù…ÙŠÙ† Ø§Ù„Ø±Ù‚Ù…</h3>
                    <p>Ø®Ù…Ù† Ø§Ù„Ø±Ù‚Ù… Ø¨ÙŠÙ† 1 Ùˆ 100</p>
                </div>
                <div class="game-card" onclick="showGame('memory')">
                    <span class="game-icon">ğŸ§ </span>
                    <h3>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø°Ø§ÙƒØ±Ø©</h3>
                    <p>Ø·Ø§Ø¨Ù‚ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…ØªØ´Ø§Ø¨Ù‡Ø©</p>
                </div>
                <div class="game-card" onclick="showGame('rps')">
                    <span class="game-icon">âœŠâœ‹âœŒï¸</span>
                    <h3>Ø­Ø¬Ø± ÙˆØ±Ù‚Ø© Ù…Ù‚Øµ</h3>
                    <p>ØªØ­Ø¯Ù‰ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Ù‚Ø³Ù… Ù„Ø¹Ø¨Ø© X O -->
    <div class="container hidden" id="game-xo">
        <div class="content-box">
            <button class="back-to-menu" onclick="showMenu()">ğŸ”™ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
            <h2>Ù„Ø¹Ø¨Ø© ØªÙŠÙƒ ØªØ§Ùƒ ØªÙˆ (X O)</h2>
            
            <div class="controls">
                <select id="mode-select" onchange="updateGameSettings()">
                    <option value="computer">Ø¶Ø¯ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ğŸ¤–</option>
                    <option value="friend">Ø¶Ø¯ ØµØ¯ÙŠÙ‚ ğŸ‘¤</option>
                </select>
                <select id="difficulty-select" onchange="updateGameSettings()">
                    <option value="easy">Ø³Ù‡Ù„ ğŸ‘¶</option>
                    <option value="medium">Ù…ØªÙˆØ³Ø· ğŸ˜</option>
                    <option value="hard" selected>ØµØ¹Ø¨ ğŸ”¥</option>
                </select>
            </div>

            <p>
                <span id="status" style="color: #ff4757; font-weight: bold;">Ø¯ÙˆØ±Ùƒ (X)</span>
            </p>
            
            <!-- Ø±Ù‚Ø¹Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© -->
            <div class="xo-board" id="board">
                <div class="cell" onclick="makeMove(0)"></div>
                <div class="cell" onclick="makeMove(1)"></div>
                <div class="cell" onclick="makeMove(2)"></div>
                <div class="cell" onclick="makeMove(3)"></div>
                <div class="cell" onclick="makeMove(4)"></div>
                <div class="cell" onclick="makeMove(5)"></div>
                <div class="cell" onclick="makeMove(6)"></div>
                <div class="cell" onclick="makeMove(7)"></div>
                <div class="cell" onclick="makeMove(8)"></div>
            </div>

            <button class="btn" onclick="resetGame()">Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
        </div>
    </div>

    <!-- Ù‚Ø³Ù… Ù„Ø¹Ø¨Ø© Ø³Ø±Ø¹Ø© Ø±Ø¯ Ø§Ù„ÙØ¹Ù„ -->
    <div class="container hidden" id="game-reaction">
        <div class="content-box">
            <button class="back-to-menu" onclick="showMenu()">ğŸ”™ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
            <h2>âš¡ Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±Ø¹Ø© Ø±Ø¯ Ø§Ù„ÙØ¹Ù„</h2>
            <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø¹Ù†Ø¯Ù…Ø§ ÙŠØªØ­ÙˆÙ„ Ù„ÙˆÙ†Ù‡ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø®Ø¶Ø± Ø¨Ø£Ø³Ø±Ø¹ Ù…Ø§ ÙŠÙ…ÙƒÙ†!</p>
            <div id="reaction-box" style="width: 100%; height: 200px; background: #8E2DE2; color: white; display: flex; justify-content: center; align-items: center; font-size: 1.5rem; cursor: pointer; border-radius: 10px; margin: 20px 0; font-weight: bold;" onclick="handleReactionClick()">Ø§Ø¶ØºØ· Ù„Ù„Ø¨Ø¯Ø¡</div>
            <p id="reaction-result" style="font-weight: bold; font-size: 1.2rem; min-height: 30px;"></p>
        </div>
    </div>

    <!-- Ù‚Ø³Ù… Ù„Ø¹Ø¨Ø© ØªØ®Ù…ÙŠÙ† Ø§Ù„Ø±Ù‚Ù… -->
    <div class="container hidden" id="game-guess">
        <div class="content-box">
            <button class="back-to-menu" onclick="showMenu()">ğŸ”™ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
            <h2>ğŸ”¢ Ù„Ø¹Ø¨Ø© ØªØ®Ù…ÙŠÙ† Ø§Ù„Ø±Ù‚Ù…</h2>
            
            <div class="controls">
                <select id="guess-difficulty" onchange="startGuessGame()">
                    <option value="easy">Ø³Ù‡Ù„ (20 Ù…Ø­Ø§ÙˆÙ„Ø©) ğŸ˜Œ</option>
                    <option value="medium" selected>Ù…ØªÙˆØ³Ø· (10 Ù…Ø­Ø§ÙˆÙ„Ø§Øª) ğŸ˜</option>
                    <option value="hard">ØµØ¹Ø¨ (5 Ù…Ø­Ø§ÙˆÙ„Ø§Øª) ğŸ”¥</option>
                </select>
            </div>

            <p>Ù„Ù‚Ø¯ Ø§Ø®ØªØ±Øª Ø±Ù‚Ù…Ø§Ù‹ Ø¨ÙŠÙ† 1 Ùˆ 100.<br>Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: <span id="attempts-display" style="color: #f1c40f; font-weight: bold;">10</span></p>
            
            <input type="number" id="guess-input" class="guess-input" placeholder="??">
            <button class="btn" onclick="checkGuess()" style="margin-top: 0;">ØªØ®Ù…ÙŠÙ†</button>
            
            <p id="guess-result" style="font-weight: bold; font-size: 1.2rem; margin-top: 20px; min-height: 30px;"></p>
            <button class="btn" onclick="startGuessGame()" style="background: #555; font-size: 0.9rem;">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
        </div>
    </div>

    <!-- Ù‚Ø³Ù… Ù„Ø¹Ø¨Ø© Ø§Ù„Ø°Ø§ÙƒØ±Ø© -->
    <div class="container hidden" id="game-memory">
        <div class="content-box">
            <button class="back-to-menu" onclick="showMenu()">ğŸ”™ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
            <h2>ğŸ§  Ù„Ø¹Ø¨Ø© Ø§Ù„Ø°Ø§ÙƒØ±Ø©</h2>
            <button class="btn" onclick="startMemoryGame()" style="margin-bottom: 20px; background: #27ae60;">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø© ğŸ</button>
            <p>Ø§Ø¹Ø«Ø± Ø¹Ù„Ù‰ ÙƒÙ„ Ø²ÙˆØ¬ Ù…Ù† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…ØªØ´Ø§Ø¨Ù‡Ø©. Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø±ÙƒØ§Øª: <span id="moves-counter" style="color: #f1c40f; font-weight: bold;">0</span> | Ø§Ù„ÙˆÙ‚Øª: <span id="timer" style="color: #2ecc71; font-weight: bold;">00:00</span></p>
            <div class="memory-board" id="memory-board">
                <!-- Cards will be generated by JS -->
            </div>
            <button class="btn" onclick="startMemoryGame()" style="margin-top: 20px;">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
        </div>
    </div>

    <!-- Ù‚Ø³Ù… Ù„Ø¹Ø¨Ø© Ø­Ø¬Ø± ÙˆØ±Ù‚Ø© Ù…Ù‚Øµ -->
    <div class="container hidden" id="game-rps">
        <div class="content-box">
            <button class="back-to-menu" onclick="showMenu()">ğŸ”™ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
            <h2>âœŠâœ‹âœŒï¸ Ø­Ø¬Ø± ÙˆØ±Ù‚Ø© Ù…Ù‚Øµ</h2>
            <div class="controls">
                <label style="color: #ccc;">Ø§Ù„ÙØ§Ø¦Ø² Ù…Ù†: </label>
                <select id="rps-target" onchange="resetRPSGame()">
                    <option value="3">3 Ù†Ù‚Ø§Ø·</option>
                    <option value="5" selected>5 Ù†Ù‚Ø§Ø·</option>
                    <option value="10">10 Ù†Ù‚Ø§Ø·</option>
                </select>
            </div>
            <p>Ø§Ø®ØªØ± Ø­Ø±ÙƒØªÙƒ Ù„Ù…ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±:</p>
            <div class="rps-choices">
                <button class="rps-btn" onclick="playRPS('rock')">âœŠ</button>
                <button class="rps-btn" onclick="playRPS('paper')">âœ‹</button>
                <button class="rps-btn" onclick="playRPS('scissors')">âœŒï¸</button>
            </div>
            <div id="rps-result" style="margin-top: 20px; font-size: 1.2rem; font-weight: bold; min-height: 60px;"></div>
            <p id="rps-score" style="margin-top: 10px; color: #ccc;">Ø§Ù„Ù†ØªÙŠØ¬Ø©: Ø£Ù†Øª 0 - 0 Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±</p>
            <button class="btn" onclick="resetRPSGame()" style="background: #555; font-size: 0.9rem; margin-top: 15px;">Ø¥Ø¹Ø§Ø¯Ø© ØªØµÙÙŠØ± Ø§Ù„Ù†ØªÙŠØ¬Ø©</button>
        </div>
    </div>

    <footer>
    </footer>

    <script>
        let currentPlayer = 'X';
        let boardState = ["", "", "", "", "", "", "", "", ""];
        let gameActive = true;
        let gameMode = 'computer';
        let difficulty = 'hard';
        let timerInterval;
        const statusDisplay = document.getElementById('status');

        const winningConditions = [
            [0, 1, 2], [3, 4, 5], [6, 7, 8], // ØµÙÙˆÙ
            [0, 3, 6], [1, 4, 7], [2, 5, 8], // Ø£Ø¹Ù…Ø¯Ø©
            [0, 4, 8], [2, 4, 6]             // Ø£Ù‚Ø·Ø§Ø±
        ];

        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…
        function showGame(gameId) {
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('game-xo').classList.add('hidden');
            document.getElementById('game-reaction').classList.add('hidden');
            document.getElementById('game-guess').classList.add('hidden');
            document.getElementById('game-memory').classList.add('hidden');
            document.getElementById('game-rps').classList.add('hidden');
            
            document.getElementById('game-' + gameId).classList.remove('hidden');
            if(gameId === 'guess') startGuessGame();
            if(gameId === 'memory') {
                document.getElementById('memory-board').innerHTML = '';
                document.getElementById('moves-counter').innerText = '0';
                document.getElementById('timer').innerText = '00:40';
                clearInterval(timerInterval);
            }
        }

        function showMenu() {
            document.getElementById('main-menu').classList.remove('hidden');
            document.getElementById('game-xo').classList.add('hidden');
            document.getElementById('game-reaction').classList.add('hidden');
            document.getElementById('game-guess').classList.add('hidden');
            document.getElementById('game-memory').classList.add('hidden');
            document.getElementById('game-rps').classList.add('hidden');
            clearInterval(timerInterval);
            resetGame(); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† XO Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø±ÙˆØ¬
        }

        function updateGameSettings() {
            gameMode = document.getElementById('mode-select').value;
            difficulty = document.getElementById('difficulty-select').value;
            
            const diffSelect = document.getElementById('difficulty-select');
            diffSelect.style.display = (gameMode === 'friend') ? 'none' : 'inline-block';
            
            resetGame();
        }

        function makeMove(index) {
            if (boardState[index] !== "" || !gameActive) return;
            if (gameMode === 'computer' && currentPlayer !== 'X') return;

            boardState[index] = currentPlayer;
            const cell = document.getElementsByClassName('cell')[index];
            cell.innerText = currentPlayer;
            cell.classList.add(currentPlayer.toLowerCase());

            checkResult();
        }

        function computerMove() {
             if (!gameActive) return;

            let bestMove = -1;
            
            // Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø­Ø³Ø¨ Ø§Ù„ØµØ¹ÙˆØ¨Ø©

            // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…ØªÙˆØ³Ø· ÙˆØ§Ù„ØµØ¹Ø¨: Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ÙÙˆØ² Ø£Ùˆ Ø§Ù„ØµØ¯
            if (difficulty !== 'easy') {
                // 1. Ø§Ù„Ù‡Ø¬ÙˆÙ… (Ø§Ù„ÙÙˆØ²)
                for (const condition of winningConditions) {
                    const [a, b, c] = condition;
                    if (boardState[a] === 'O' && boardState[b] === 'O' && boardState[c] === '') { bestMove = c; break; }
                    if (boardState[a] === 'O' && boardState[c] === 'O' && boardState[b] === '') { bestMove = b; break; }
                    if (boardState[b] === 'O' && boardState[c] === 'O' && boardState[a] === '') { bestMove = a; break; }
                }

                // 2. Ø§Ù„Ø¯ÙØ§Ø¹ (Ø§Ù„ØµØ¯)
                if (bestMove === -1) {
                    for (const condition of winningConditions) {
                        const [a, b, c] = condition;
                        if (boardState[a] === 'X' && boardState[b] === 'X' && boardState[c] === '') { bestMove = c; break; }
                        if (boardState[a] === 'X' && boardState[c] === 'X' && boardState[b] === '') { bestMove = b; break; }
                        if (boardState[b] === 'X' && boardState[c] === 'X' && boardState[a] === '') { bestMove = a; break; }
                    }
                }
            }

            // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹Ø¨ ÙÙ‚Ø·: Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„ØªÙ…Ø±ÙƒØ²
            if (difficulty === 'hard') {
                // 3. Ø§Ù„Ø³ÙŠØ·Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØµÙ
                if (bestMove === -1 && boardState[4] === '') bestMove = 4;
                
                // 4. Ø§Ù„Ø²ÙˆØ§ÙŠØ§
                if (bestMove === -1) {
                    const corners = [0, 2, 6, 8].filter(index => boardState[index] === '');
                    if (corners.length > 0) bestMove = corners[Math.floor(Math.random() * corners.length)];
                }
            }

            // 5. Ø­Ø±ÙƒØ© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© (Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø³Ù‡Ù„ Ø£Ùˆ ÙƒØ®ÙŠØ§Ø± Ø£Ø®ÙŠØ±)
            if (bestMove === -1) {
                const availableMoves = boardState.map((val, idx) => val === "" ? idx : null).filter(val => val !== null);
                if (availableMoves.length > 0) bestMove = availableMoves[Math.floor(Math.random() * availableMoves.length)];
            }

            if (bestMove !== -1) {
                boardState[bestMove] = currentPlayer; // currentPlayer is 'O'
                const cell = document.getElementsByClassName('cell')[bestMove];
                cell.innerText = currentPlayer;
                cell.classList.add('o');
                checkResult();
            }
        }

        function checkResult() {
            let roundWon = false;
            for (let i = 0; i < winningConditions.length; i++) {
                const [a, b, c] = winningConditions[i];
                if (boardState[a] && boardState[a] === boardState[b] && boardState[a] === boardState[c]) {
                    roundWon = true;
                    break;
                }
            }

            if (roundWon) {
                if (gameMode === 'computer') {
                    statusDisplay.innerText = currentPlayer === 'X' ? "Ø£Ù†Øª ÙØ²Øª! ğŸ‰" : "Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙØ§Ø²! ğŸ¤–";
                } else {
                    statusDisplay.innerText = `Ø§Ù„Ù„Ø§Ø¹Ø¨ ${currentPlayer} ÙØ§Ø²! ğŸ‰`;
                }
                gameActive = false;
                return;
            }

            if (!boardState.includes("")) {
                statusDisplay.innerText = "ØªØ¹Ø§Ø¯Ù„! ğŸ¤";
                gameActive = false;
                return;
            }

            currentPlayer = currentPlayer === "X" ? "O" : "X";
            
            if (gameMode === 'computer') {
                if (currentPlayer === "O") {
                    statusDisplay.innerText = "Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙŠÙÙƒØ±... ğŸ¤”";
                    statusDisplay.style.color = "#2ed573";
                    setTimeout(computerMove, 700);
                } else {
                    statusDisplay.innerText = "Ø¯ÙˆØ±Ùƒ (X)";
                    statusDisplay.style.color = "#ff4757";
                }
            } else {
                statusDisplay.innerText = `Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨ (${currentPlayer})`;
                statusDisplay.style.color = currentPlayer === "X" ? "#ff4757" : "#2ed573";
            }
        }

        function resetGame() {
            currentPlayer = 'X';
            boardState = ["", "", "", "", "", "", "", "", ""];
            gameActive = true;
            statusDisplay.innerText = (gameMode === 'computer') ? "Ø¯ÙˆØ±Ùƒ (X)" : "Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨ (X)";
            statusDisplay.style.color = "#ff4757";
            document.querySelectorAll('.cell').forEach(cell => {
                cell.innerText = "";
                cell.classList.remove('x', 'o');
            });
        }

        // Ù…Ù†Ø·Ù‚ Ù„Ø¹Ø¨Ø© Ø³Ø±Ø¹Ø© Ø±Ø¯ Ø§Ù„ÙØ¹Ù„
        let reactionStartTime, reactionEndTime;
        let reactionActive = false;
        const reactionBox = document.getElementById('reaction-box');
        const reactionResult = document.getElementById('reaction-result');

        function handleReactionClick() {
            if (!reactionActive) {
                reactionActive = true;
                reactionBox.style.backgroundColor = "#e74c3c"; // Ø£Ø­Ù…Ø±
                reactionBox.innerText = "Ø§Ù†ØªØ¸Ø± Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø®Ø¶Ø±...";
                reactionResult.innerText = "";
                
                const randomTime = Math.floor(Math.random() * 2000) + 1000;
                setTimeout(() => {
                    if(reactionActive) {
                        reactionBox.style.backgroundColor = "#2ecc71"; // Ø£Ø®Ø¶Ø±
                        reactionBox.innerText = "Ø§Ø¶ØºØ· Ø§Ù„Ø¢Ù†!";
                        reactionStartTime = new Date().getTime();
                        reactionBox.setAttribute('data-ready', 'true');
                    }
                }, randomTime);
            } else {
                if (reactionBox.getAttribute('data-ready') === 'true') {
                    reactionEndTime = new Date().getTime();
                    const timeTaken = reactionEndTime - reactionStartTime;
                    reactionResult.innerText = `ÙˆÙ‚ØªÙƒ Ù‡Ùˆ: ${timeTaken} Ù…ÙŠÙ„ÙŠ Ø«Ø§Ù†ÙŠØ©! ğŸš€`;
                    reactionResult.style.color = "#2ecc71";
                    reactionActive = false;
                    reactionBox.removeAttribute('data-ready');
                    reactionBox.style.backgroundColor = "#8E2DE2";
                    setTimeout(() => reactionBox.innerText = "Ø§Ø¶ØºØ· Ù„Ù„Ø¨Ø¯Ø¡ Ù…Ù† Ø¬Ø¯ÙŠØ¯", 1500);
                } else {
                    reactionResult.innerText = "Ø§Ø³ØªØ¹Ø¬Ù„Øª! Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
                    reactionResult.style.color = "#e74c3c";
                    reactionActive = false;
                    reactionBox.style.backgroundColor = "#8E2DE2";
                    reactionBox.innerText = "Ø§Ø¶ØºØ· Ù„Ù„Ø¨Ø¯Ø¡ Ù…Ù† Ø¬Ø¯ÙŠØ¯";
                }
            }
        }

        // Ù…Ù†Ø·Ù‚ Ù„Ø¹Ø¨Ø© ØªØ®Ù…ÙŠÙ† Ø§Ù„Ø±Ù‚Ù…
        let targetNumber;
        let maxAttempts = 10;
        let remainingAttempts = 10;

        function startGuessGame() {
            const diff = document.getElementById('guess-difficulty').value;
            if (diff === 'easy') maxAttempts = 20;
            else if (diff === 'medium') maxAttempts = 10;
            else maxAttempts = 5;

            remainingAttempts = maxAttempts;
            targetNumber = Math.floor(Math.random() * 100) + 1;
            
            document.getElementById('attempts-display').innerText = remainingAttempts;
            document.getElementById('guess-result').innerText = "";
            document.getElementById('guess-result').style.color = "#fff";
            document.getElementById('guess-input').value = "";
            document.getElementById('guess-input').disabled = false;
        }

        function checkGuess() {
            const userGuess = parseInt(document.getElementById('guess-input').value);
            const inputField = document.getElementById('guess-input');
            const resultDisplay = document.getElementById('guess-result');
            
            if (isNaN(userGuess)) {
                resultDisplay.innerText = "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… ØµØ­ÙŠØ­!";
                resultDisplay.style.color = "#e74c3c";
                return;
            }

            remainingAttempts--;
            document.getElementById('attempts-display').innerText = remainingAttempts;

            if (userGuess === targetNumber) {
                resultDisplay.innerText = `ğŸ‰ ØµØ­ÙŠØ­! Ø§Ù„Ø±Ù‚Ù… Ù‡Ùˆ ${targetNumber}.`;
                resultDisplay.style.color = "#2ecc71";
                inputField.disabled = true;
            } else if (remainingAttempts <= 0) {
                resultDisplay.innerText = `âŒ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª! Ø§Ù„Ø±Ù‚Ù… ÙƒØ§Ù† ${targetNumber}.`;
                resultDisplay.style.color = "#e74c3c";
                inputField.disabled = true;
            } else if (userGuess < targetNumber) {
                resultDisplay.innerText = "ğŸ“‰ Ø§Ù„Ø±Ù‚Ù… Ø£ÙƒØ¨Ø±! Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
                resultDisplay.style.color = "#f1c40f";
            } else {
                resultDisplay.innerText = "ğŸ“ˆ Ø§Ù„Ø±Ù‚Ù… Ø£ØµØºØ±! Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
                resultDisplay.style.color = "#f1c40f";
            }
        }

        // Ù…Ù†Ø·Ù‚ Ù„Ø¹Ø¨Ø© Ø§Ù„Ø°Ø§ÙƒØ±Ø©
        const memoryBoard = document.getElementById('memory-board');
        const movesCounter = document.getElementById('moves-counter');
        const timerDisplay = document.getElementById('timer');
        let hasFlippedCard = false;
        let lockBoard = false;
        let firstCard, secondCard;
        let moves = 0;
        let timeLeft = 60;
        let matchedPairs = 0;

        function startMemoryGame() {
            const emojis = ['ğŸ•', 'ğŸ•', 'ğŸš€', 'ğŸš€', 'â­', 'â­', 'ğŸ¤–', 'ğŸ¤–', 'ğŸ’¡', 'ğŸ’¡', 'ğŸ‰', 'ğŸ‰'];
            emojis.sort(() => 0.5 - Math.random()); // Shuffle

            memoryBoard.innerHTML = '';
            moves = 0;
            movesCounter.innerText = moves;
            lockBoard = false;
            hasFlippedCard = false;
            
            clearInterval(timerInterval);
            timeLeft = 40; // Ø²Ù…Ù† Ø§Ù„Ù„Ø¹Ø¨Ø© 40 Ø«Ø§Ù†ÙŠØ©
            matchedPairs = 0;
            timerDisplay.innerText = "00:40";
            timerDisplay.style.color = "#2ecc71";
            
            timerInterval = setInterval(() => {
                timeLeft--;
                const minutes = Math.floor(timeLeft / 60).toString().padStart(2, '0');
                const seconds = (timeLeft % 60).toString().padStart(2, '0');
                timerDisplay.innerText = `${minutes}:${seconds}`;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerDisplay.innerText = "Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª!";
                    timerDisplay.style.color = "#e74c3c";
                    lockBoard = true; // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù„Ø¹Ø¨
                }
            }, 1000);

            emojis.forEach(emoji => {
                const card = document.createElement('div');
                card.classList.add('memory-card');
                card.dataset.emoji = emoji;

                card.innerHTML = `
                    <div class="card-face card-front"></div>
                    <div class="card-face card-back">${emoji}</div>
                `;
                card.addEventListener('click', flipCard);
                memoryBoard.appendChild(card);
            });
        }

        function flipCard() {
            if (lockBoard) return;
            if (this === firstCard) return;

            this.classList.add('is-flipped');

            if (!hasFlippedCard) {
                hasFlippedCard = true;
                firstCard = this;
                return;
            }

            secondCard = this;
            moves++;
            movesCounter.innerText = moves;

            let isMatch = firstCard.dataset.emoji === secondCard.dataset.emoji;
            isMatch ? disableCards() : unflipCards();
        }

        function disableCards() {
            firstCard.removeEventListener('click', flipCard);
            secondCard.removeEventListener('click', flipCard);
            firstCard.classList.add('is-matched');
            secondCard.classList.add('is-matched');
            
            matchedPairs++;
            if (matchedPairs === 6) {
                clearInterval(timerInterval);
                timerDisplay.innerText = "Ù…Ø¨Ø±ÙˆÙƒ Ù„Ù‚Ø¯ ÙØ²Øª! ğŸ‰";
            }
            resetBoardState();
        }

        function unflipCards() {
            lockBoard = true;
            setTimeout(() => {
                firstCard.classList.remove('is-flipped');
                secondCard.classList.remove('is-flipped');
                resetBoardState();
            }, 1200);
        }

        function resetBoardState() {
            [hasFlippedCard, lockBoard] = [false, false];
            [firstCard, secondCard] = [null, null];
        }

        // Ù…Ù†Ø·Ù‚ Ù„Ø¹Ø¨Ø© Ø­Ø¬Ø± ÙˆØ±Ù‚Ø© Ù…Ù‚Øµ
        let rpsPlayerScore = 0;
        let rpsComputerScore = 0;

        function playRPS(playerChoice) {
            const targetScore = parseInt(document.getElementById('rps-target').value);
            if (rpsPlayerScore >= targetScore || rpsComputerScore >= targetScore) return;

            const choices = ['rock', 'paper', 'scissors'];
            const emojis = { rock: 'âœŠ', paper: 'âœ‹', scissors: 'âœŒï¸' };
            
            const computerChoice = choices[Math.floor(Math.random() * 3)];
            
            let result = '';
            let color = '';

            if (playerChoice === computerChoice) {
                result = "ØªØ¹Ø§Ø¯Ù„! ğŸ¤";
                color = '#f1c40f';
            } else if (
                (playerChoice === 'rock' && computerChoice === 'scissors') ||
                (playerChoice === 'paper' && computerChoice === 'rock') ||
                (playerChoice === 'scissors' && computerChoice === 'paper')
            ) {
                result = "ÙØ²Øª! ğŸ‰";
                color = '#2ecc71';
                rpsPlayerScore++;
            } else {
                result = "Ø®Ø³Ø±Øª! ğŸ˜¢";
                color = '#e74c3c';
                rpsComputerScore++;
            }

            const resultDiv = document.getElementById('rps-result');
            resultDiv.innerHTML = `<div style="margin-bottom: 10px;">Ø£Ù†Øª: ${emojis[playerChoice]}  VS  Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±: ${emojis[computerChoice]}</div><div style="color: ${color}; font-size: 1.5rem;">${result}</div>`;
            
            document.getElementById('rps-score').innerText = `Ø§Ù„Ù†ØªÙŠØ¬Ø©: Ø£Ù†Øª ${rpsPlayerScore} - ${rpsComputerScore} Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±`;

            if (rpsPlayerScore >= targetScore) {
                resultDiv.innerHTML += `<br><span style="color: #2ecc71; font-weight: bold; font-size: 1.2rem;">ğŸ† Ù…Ø¨Ø±ÙˆÙƒ! Ù„Ù‚Ø¯ ÙØ²Øª Ø¨Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©!</span>`;
            } else if (rpsComputerScore >= targetScore) {
                resultDiv.innerHTML += `<br><span style="color: #e74c3c; font-weight: bold; font-size: 1.2rem;">ğŸ’€ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©! ÙØ§Ø² Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±.</span>`;
            }
        }

        function resetRPSGame() {
            rpsPlayerScore = 0;
            rpsComputerScore = 0;
            document.getElementById('rps-score').innerText = "Ø§Ù„Ù†ØªÙŠØ¬Ø©: Ø£Ù†Øª 0 - 0 Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±";
            document.getElementById('rps-result').innerHTML = "";
        }
    </script>
</body>
</html>